const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ApiDocs-DhmJoXaX.js","./clear-BJfJ8fXC.js","./i18n-DMKL1Q3B.js","./index-BXZmp9-u.js","./index-D7cRHYCp.css","./i18n--4Ke01SI.css","./Button-CEMFqc-n.js","./Image-Bdf4wQSw.js","./Image-Da_XA0w6.css","./ImagePreview-CahJZlWj.js","./utils.svelte-Ceck75cM.js","./IconButtonWrapper-BWheMLkN.js","./MarkdownCode-U4KoZ7qK.js","./prism-python-iiDAHIFD.js","./MarkdownCode-Uk-jbna-.css","./IconButtonWrapper-DVQ8sIMc.css","./ShareButton-DLehHS0O.js","./FullscreenButton-B8JPMBMa.js","./ImagePreview-CCVfwC4m.css","./Button-BZ4d-rtD.css","./StreamingBar-DrfQmzG9.js","./StreamingBar-K0YZHDYh.css","./init.svelte-DZC7iBwi.js","./index-tFQomdd2.js","./state.svelte-DFm6rEHb.js","./ApiDocs-YhV7c3aO.css","./ApiRecorder-BwEQH2K3.js","./ApiRecorder-CoSLrx_1.css","./Settings-DLvPASMF.js","./Index-CsYOxAgl.js","./Example-Ctdnw0MA.js","./Example-BeU1J4ps.css","./Index-CRhvQE-V.css","./Index-Bjw0_N1w.js","./Index-B2BpVHOS.css","./Settings-CLQaonub.css","./Index-3J0opp2M.js","./Index-Dp6YLh5n.js","./Example-C8-r9viM.js","./Example-BK-tWmkG.css","./Index-wZDUWKrz.css","./Index-CYwstBBN.js","./Example-Cyq1a9kK.js","./Example-CgIc4GLa.css","./Index-cY7HT1Ac.css","./Index-DP8ihX8q.css"])))=>i.map(i=>d[i]);
import{_ as X}from"./index-BXZmp9-u.js";import"./svelte/svelte_internal_flags_async.js";import*as e from"./svelte/svelte_internal_client.js";import{setContext as Te,untrack as Ue,onMount as qe}from"./svelte/svelte_svelte.js";import{A as ke,v as Ie,p as Ge}from"./i18n-DMKL1Q3B.js";import{writable as Ve}from"./svelte/svelte_store.js";import{T as Be}from"./StreamingBar-DrfQmzG9.js";import{d as Ne}from"./utils.svelte-Ceck75cM.js";import{A as Ze}from"./init.svelte-DZC7iBwi.js";import{L as We}from"./state.svelte-DFm6rEHb.js";function Ce(c,t){e.push(t,!0);var i,a=e.run([async()=>i=await e.async_derived(()=>t.node.component)]),s=e.comment(),o=e.first_child(s);e.async(o,[a[0]],[()=>t.node&&e.get(i)],(_,u)=>{var p=b=>{var M=e.comment(),l=e.first_child(M);e.async(l,[a[0]],[()=>t.node.props.shared_props.visible],(x,h)=>{var F=d=>{var O=e.comment(),w=e.first_child(O);e.async(w,[a[0]],void 0,z=>{e.component(w,()=>e.get(i).default,(g,E)=>{E(g,{get shared_props(){return t.node.props.shared_props},get props(){return t.node.props.props},children:(B,D)=>{var v=e.comment(),P=e.first_child(v);e.async(P,[a[0]],[()=>t.node.children&&t.node.children.length],(N,ee)=>{var ae=Z=>{var te=e.comment(),W=e.first_child(te);e.async(W,[a[0]],[()=>t.node.children],(H,U)=>{e.each(H,17,()=>e.get(U),e.index,(ne,re)=>{Ce(ne,{get node(){return e.get(re)}})})}),e.append(Z,te)};e.if(N,Z=>{e.get(ee)&&Z(ae)})}),e.append(B,v)},$$slots:{default:!0}})})}),e.append(d,O)};e.if(x,d=>{e.get(h)&&d(F)})}),e.append(b,M)};e.if(_,b=>{e.get(u)&&b(p)})}),e.append(c,s),e.pop()}const He="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='576'%20height='576'%20viewBox='0%200%20576%20576'%20fill='none'%3e%3cpath%20d='M287.5%20229L86%20344.5L287.5%20460L489%20344.5L287.5%20229Z'%20stroke='url(%23paint0_linear_102_7)'%20stroke-width='59'%20stroke-linejoin='round'/%3e%3cpath%20d='M287.5%20116L86%20231.5L287.5%20347L489%20231.5L287.5%20116Z'%20stroke='url(%23paint1_linear_102_7)'%20stroke-width='59'%20stroke-linejoin='round'/%3e%3cpath%20d='M86%20344L288%20229'%20stroke='url(%23paint2_linear_102_7)'%20stroke-width='59'%20stroke-linejoin='bevel'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_102_7'%20x1='60'%20y1='341'%20x2='429.5'%20y2='344'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F9D100'/%3e%3cstop%20offset='1'%20stop-color='%23F97700'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_102_7'%20x1='513.5'%20y1='231'%20x2='143.5'%20y2='231'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F9D100'/%3e%3cstop%20offset='1'%20stop-color='%23F97700'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint2_linear_102_7'%20x1='60'%20y1='344'%20x2='428.987'%20y2='341.811'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F9D100'/%3e%3cstop%20offset='1'%20stop-color='%23F97700'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",Je="data:image/svg+xml,%3csvg%20width='28'%20height='28'%20viewBox='0%200%2028%2028'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M26.9425%202.94265C27.4632%202.42195%2027.4632%201.57773%2026.9425%201.05703C26.4218%200.536329%2025.5776%200.536329%2025.0569%201.05703L22.5713%203.54256C21.1213%202.59333%2019.5367%202.43378%2018.1753%202.64006C16.5495%202.88638%2015.1127%203.66838%2014.3905%204.39053L12.3905%206.39053C12.1405%206.64058%2012%206.97972%2012%207.33334C12%207.68697%2012.1405%208.0261%2012.3905%208.27615L19.7239%2015.6095C20.2446%2016.1302%2021.0888%2016.1302%2021.6095%2015.6095L23.6095%2013.6095C24.3316%2012.8873%2025.1136%2011.4505%2025.36%209.82475C25.5663%208.46312%2025.4066%206.87827%2024.4571%205.42807L26.9425%202.94265Z'%20fill='%233c4555'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M12.276%2012.9426C12.7967%2012.4219%2012.7967%2011.5777%2012.276%2011.057C11.7553%2010.5363%2010.9111%2010.5363%2010.3904%2011.057L8.66651%2012.7809L8.27615%2012.3905C8.0261%2012.1405%207.68697%2012%207.33334%2012C6.97972%2012%206.64058%2012.1405%206.39053%2012.3905L4.39053%2014.3905C3.66838%2015.1127%202.88638%2016.5495%202.64006%2018.1753C2.43377%2019.5367%202.59333%2021.1214%203.54262%2022.5714L1.05703%2025.057C0.536329%2025.5777%200.536329%2026.4219%201.05703%2026.9426C1.57773%2027.4633%202.42195%2027.4633%202.94265%2026.9426L5.42817%2024.4571C6.87835%2025.4066%208.46315%2025.5663%209.82475%2025.36C11.4505%2025.1136%2012.8873%2024.3316%2013.6095%2023.6095L15.6095%2021.6095C16.1302%2021.0888%2016.1302%2020.2446%2015.6095%2019.7239L15.2188%2019.3332L16.9426%2017.6093C17.4633%2017.0886%2017.4633%2016.2444%2016.9426%2015.7237C16.4219%2015.203%2015.5777%2015.203%2015.057%2015.7237L13.3332%2017.4475L10.5521%2014.6665L12.276%2012.9426Z'%20fill='%23FF7C00'/%3e%3c/svg%3e",Qe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Outer%20gear%20teeth%20(gray)%20--%3e%3cpath%20d='M19.14%2012.94c.04-.3.06-.61.06-.94%200-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24%200-.43.17-.47.41l-.36%202.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47%200-.59.22L2.74%208.87c-.12.21-.08.47.12.61l2.03%201.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03%201.58c-.18.14-.23.41-.12.61l1.92%203.32c.12.22.37.29.59.22l2.39-.96c.5.38%201.03.7%201.62.94l.36%202.54c.05.24.24.41.48.41h3.84c.24%200%20.44-.17.47-.41l.36-2.54c.59-.24%201.13-.56%201.62-.94l2.39.96c.22.08.47%200%20.59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12%2015.6c-1.98%200-3.6-1.62-3.6-3.6s1.62-3.6%203.6-3.6%203.6%201.62%203.6%203.6-1.62%203.6-3.6%203.6z'%20fill='%23808080'/%3e%3c!--%20Inner%20circle%20(now%20gray)%20--%3e%3ccircle%20cx='12'%20cy='12'%20r='2.5'%20fill='%23808080'/%3e%3c/svg%3e",Ke="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20fill='%23000000'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'%3e%3c/g%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/g%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3ctitle%3erecord%20[%23982]%3c/title%3e%3cdesc%3eCreated%20with%20Sketch.%3c/desc%3e%3cdefs%3e%3c/defs%3e%3cg%20id='Page-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='Dribbble-Light-Preview'%20transform='translate(-380.000000,%20-3839.000000)'%20fill='%23FF0000'%3e%3cg%20id='icons'%20transform='translate(56.000000,%20160.000000)'%3e%3cpath%20d='M338,3689%20C338,3691.209%20336.209,3693%20334,3693%20C331.791,3693%20330,3691.209%20330,3689%20C330,3686.791%20331.791,3685%20334,3685%20C336.209,3685%20338,3686.791%20338,3689%20M334,3697%20C329.589,3697%20326,3693.411%20326,3689%20C326,3684.589%20329.589,3681%20334,3681%20C338.411,3681%20342,3684.589%20342,3689%20C342,3693.411%20338.411,3697%20334,3697%20M334,3679%20C328.477,3679%20324,3683.477%20324,3689%20C324,3694.523%20328.477,3699%20334,3699%20C339.523,3699%20344,3694.523%20344,3689%20C344,3683.477%20339.523,3679%20334,3679'%20id='record-[%23982]'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";let $=!1,V=null,de=[],Xe=0,Y={},Ye,le,$e=null,oe=[];async function et(){if(!$)try{const c=document.title;document.title="[Sharing] Gradio Tab";const t=await navigator.mediaDevices.getDisplayMedia({video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},audio:!0,selfBrowserSurface:"include"});document.title=c;const i={videoBitsPerSecond:5e6};V=new MediaRecorder(t,i),de=[],Y={},V.ondataavailable=it,V.onstop=st,V.start(1e3),$=!0,Xe=Date.now()}catch(c){le("Recording Error","Failed to start recording: "+c.message,"error")}}function tt(){!$||!V||(V.stop(),$=!1)}function it(c){c.data.size>0&&de.push(c.data)}function st(){$=!1;const c=new Blob(de,{type:"video/mp4"});at(c),(V?.stream?.getTracks()||[]).forEach(i=>i.stop())}async function at(c){try{le("Processing video","This may take a few seconds...","info");const t=new FormData;t.append("video",c,"recording.mp4"),Y.start!==void 0&&Y.end!==void 0&&(t.append("remove_segment_start",Y.start.toString()),t.append("remove_segment_end",Y.end.toString())),oe.length>0&&t.append("zoom_effects",JSON.stringify(oe));const i=await fetch(Ye+"/gradio_api/process_recording",{method:"POST",body:t});if(!i.ok)throw new Error(`Server returned ${i.status}: ${i.statusText}`);const a=await i.blob(),s=`gradio-screen-recording-${new Date().toISOString().replace(/:/g,"-").replace(/\..+/,"")}.mp4`;ye(a,s),oe=[]}catch{le("Processing Error","Failed to process recording. Saving original version.","warning");const i=`gradio-screen-recording-${new Date().toISOString().replace(/:/g,"-").replace(/\..+/,"")}.mp4`;ye(c,i)}}function ye(c,t){const i=URL.createObjectURL(c),a=document.createElement("a");a.style.display="none",a.href=i,a.download=t,document.body.appendChild(a),a.click(),setTimeout(()=>{document.body.removeChild(a),URL.revokeObjectURL(i)},100)}const nt=/^'([^]+)'$/,xe=Symbol("NOVALUE");class rt{id;inputs;outputs;cancels;pending=!1;trigger_modes;event_args={};targets=[];connection_type;triggers=[];original_trigger_id=null;show_progress_on=null;component_prop_inputs=[];show_progress;functions;constructor(t){this.id=t.id,this.original_trigger_id=t.id,this.inputs=t.inputs,this.outputs=t.outputs,this.connection_type=t.connection,this.show_progress=t.show_progress,this.functions={frontend:t.js?ct(t.js,t.backend_fn,t.inputs.length,t.outputs.length):void 0,backend:t.backend_fn,backend_js:t.js_implementation?new ke(`let result = await (${t.js_implementation})(...arguments);
						return (!Array.isArray(result)) ? [result] : result;`):void 0},this.targets=t.targets,this.cancels=t.cancels,this.trigger_modes=t.trigger_mode,this.show_progress_on=t.show_progress_on||null,this.component_prop_inputs=t.component_prop_inputs||[];for(let i=0;i<t.event_specific_args?.length;i++){const a=t.event_specific_args[i];this.event_args[a]=t[a]??null}}async run(t,i,a,s){let o=i;return this.functions.backend_js?{type:"data",data:await this.functions.backend_js(...o)}:(this.functions.frontend&&(o=await this.functions.frontend(i)),this.functions.backend?{type:"submit",data:t.submit(this.id,o,a,s)}:this.functions.frontend?{type:"data",data:o}:{type:"void",data:null})}add_trigger(t,i){this.triggers.push([t,i])}get_triggers(){return{success:this.triggers.filter(([,t])=>t==="success").map(([t])=>t),failure:this.triggers.filter(([,t])=>t==="failure").map(([t])=>t),all:this.triggers.filter(([,t])=>t==="all").map(([t])=>t)}}}class ot{dependencies_by_fn=new Map;dependencies_by_event=new Map;render_id_deps=new Map;submissions=new Map;client;queue=new Set;add_to_api_calls;update_state_cb;get_state_cb;rerender_cb;log_cb;loading_stati=new We;constructor(t,i,a,s,o,_,u){this.add_to_api_calls=u,this.log_cb=_,this.update_state_cb=a,this.get_state_cb=s,this.rerender_cb=o,this.client=i,this.reload(t,a,s,o,i)}reload(t,i,a,s,o){const{by_id:_,by_event:u}=this.create(t);this.dependencies_by_event=u,this.dependencies_by_fn=_,this.client=o,this.update_state_cb=i,this.get_state_cb=a,this.rerender_cb=s;for(const[p,b]of this.dependencies_by_fn)for(const[M]of b.targets)this.set_event_args(M,b.event_args);this.register_loading_stati(_)}register_loading_stati(t){for(const[i,a]of t)this.loading_stati.register(a.id,a.show_progress_on||a.outputs,a.inputs,a.show_progress)}clear_loading_status(t){this.loading_stati.clear(t)}async update_loading_stati_state(){for(const[t,i]of Object.entries(this.loading_stati.current))this.update_state_cb(Number(t),{loading_status:i},!1)}dispatch_state_change_events(t){if(t.changed_state_ids)for(const i of t.changed_state_ids)this.dependencies_by_event.get("change-"+i)?.forEach(s=>{this.dispatch({type:"fn",fn_index:s.id,target_id:i,event_data:null})})}async dispatch(t){let i;if(t.type==="fn"){const a=this.dependencies_by_fn.get(t.fn_index);a&&(i=[a])}else i=this.dependencies_by_event.get(`${t.event_name}-${t.target_id}`);for(let a=0;a<(i?.length||0);a++){const s=i?i[a]:void 0;if(s){this.cancel(s.cancels);const o=dt(s.trigger_modes,this.submissions.has(s.id));if(o==="skip")continue;if(o==="defer"){this.queue.add(s.id);continue}s.functions.backend&&(this.loading_stati.update({status:"pending",fn_index:s.id,stream_state:null}),this.update_loading_stati_state());const _=await this.gather_state(s.inputs,s.component_prop_inputs),u=await Promise.all(s.targets.map(([l])=>this.set_event_args(l,s.event_args))),{success:p,failure:b,all:M}=s.get_triggers();try{let l=null;if(t.target_id!==void 0||t.type==="event"?l=t.target_id||null:l=s.original_trigger_id,s.connection_type==="stream"&&this.submissions.has(s.id)){const h=this.submissions.get(s.id);let F={fn_index:s.id,data:_,event_data:t.event_data};h.send_chunk(F),u.forEach(d=>d());continue}this.add_to_api_calls({fn_index:s.id,data:_,event_data:t.event_data,trigger_id:l});const x=await s.run(this.client,_,t.event_data,l);if(x.type==="void")u.forEach(h=>h());else if(x.type==="data")await this.handle_data(s.outputs,x.data),u.forEach(h=>h());else{let h=null;s.connection_type==="stream"&&!this.submissions.has(s.id)&&(h="waiting"),this.submissions.set(s.id,x.data);let F=0;e:for await(const d of x.data)if(F===0&&s.inputs.forEach(O=>{this.update_state_cb(O,{loading_status:{validation_error:null}},!1)}),F+=1,d!==null){if(d.type==="data"&&await this.handle_data(s.outputs,d.data),d.type==="status"){d.original_msg==="process_starts"&&s.connection_type==="stream"&&(h="open");const{fn_index:O,...w}=d;if(d.stage==="complete"){h="closed",p.forEach(z=>{this.dispatch({type:"fn",fn_index:z,event_data:null,target_id:l})}),this.dispatch_state_change_events(d),this.loading_stati.update({...w,status:w.stage,fn_index:s.id,stream_state:h}),this.update_loading_stati_state();break e}else if(d.stage==="generating")this.dispatch_state_change_events(d),this.loading_stati.update({...w,status:w.stage,fn_index:s.id,stream_state:h}),this.update_loading_stati_state();else if(d.stage==="error"){if(Array.isArray(d?.message)){d.message.forEach((g,E)=>{this.update_state_cb(s.inputs[E],{loading_status:{validation_error:g.is_valid?null:g.message,show_validation_error:!0}},!1)}),s.outputs.forEach(g=>{s.inputs.includes(g)||this.update_state_cb(g,{loading_status:{status:null}},!1)}),u.forEach(g=>g()),this.submissions.delete(s.id),this.queue.has(s.id)&&(this.queue.delete(s.id),this.dispatch(t));return}const z=d?.message?.replace(nt,(g,E)=>E);throw this.log_cb(d?._title??"Error",z||"",O,"error",w.duration,w.visible),new Error("Dependency function failed")}else this.loading_stati.update({...w,status:w.stage,fn_index:s.id,stream_state:h}),this.update_loading_stati_state()}if(d.type==="render"){this.loading_stati.update({status:"complete",fn_index:s.id,stream_state:null}),this.update_loading_stati_state();const{layout:O,components:w,render_id:z,dependencies:g}=d.data;this.rerender_cb(w,O);const{by_id:E,by_event:B}=this.create(g);this.register_loading_stati(E),E.forEach(v=>this.dependencies_by_fn.set(v.id,v)),B.forEach((v,P)=>this.dependencies_by_event.set(P,v));const D=this.render_id_deps.get(z);D&&D.forEach(v=>{E.has(v)||this.dependencies_by_fn.delete(v)}),this.render_id_deps.set(z,new Set(Array.from(E.keys()))),this.register_loading_stati(E);break e}d.type==="log"&&this.handle_log(d)}M.forEach(d=>{this.dispatch({type:"fn",fn_index:d,event_data:null,target_id:l})}),u.forEach(d=>d()),this.submissions.delete(s.id),this.queue.has(s.id)&&(this.queue.delete(s.id),this.dispatch(t))}}catch{this.loading_stati.update({status:"error",fn_index:s.id,eta:0,queue:!1,stream_state:null}),this.update_loading_stati_state(),this.submissions.delete(s.id),b.forEach(x=>{this.dispatch({type:"fn",fn_index:x,event_data:null})})}}}}create(t){const i=new Map,a=new Map,s=[];for(const o of t){const _=new rt(o);for(const[u,p]of o.targets)a.has(`${p}-${u}`)||a.set(`${p}-${u}`,[]),a.get(`${p}-${u}`)?.push(_);if(i.set(o.id,_),o.trigger_after!==void 0){const u=o.trigger_only_on_failure?"failure":o.trigger_only_on_success?"success":"all";s.push([o.id,o.trigger_after,u])}}for(const[o,_,u]of s){const p=i.get(_);p&&(p.add_trigger(o,u),p.original_trigger_id=_t(t,_))}return{by_id:i,by_event:a}}handle_log(t){const{title:i,log:a,fn_index:s,level:o,duration:_,visible:u}=t;this.log_cb(i,a,s,o,_,u)}async handle_data(t,i){await Promise.all(t.map(async(a,s)=>{const o=i[s]===void 0?xe:i[s];if(o!==xe)if(lt(o)){let _=!1,u=null;for(const[p,b]of Object.entries(o))if(p!=="__type__"){if(p==="visible"){_=!0,u=b;continue}await this.update_state_cb(t[s],{[p]:b},!1)}_&&await this.update_state_cb(t[s],{visible:u},!0)}else await this.update_state_cb(a,{value:o},!1)}))}async gather_state(t,i=[]){return(await Promise.all(t.map(a=>this.get_state_cb(a)))).map((a,s)=>i.includes(s)?a??null:a?.value??null)}async set_event_args(t,i){let a={};const s=await this.get_state_cb?.(t);if(!s)return()=>{};for(const[o]of Object.entries(i))a[o]=s?.[o]??null;return Object.keys(i).length===0?()=>{}:(await this.update_state_cb(t,i,!1),()=>{this.update_state_cb(t,a,!1)})}async cancel(t){if(t)for(const i of t){const a=this.submissions.get(i);a&&(await a.cancel(),this.loading_stati.update({status:"complete",fn_index:i,eta:0,queue:!1,stream_state:null}),this.update_loading_stati_state(),this.submissions.delete(i))}}dispatch_load_events(){this.dependencies_by_fn.forEach(t=>{t.targets.forEach(([i,a])=>{a==="load"&&this.dispatch({type:"fn",fn_index:t.id,event_data:null,target_id:i})})})}get_fns_from_targets(t){const i=[];return this.dependencies_by_event.forEach((a,s)=>{const[,o]=s.split("-");Number(o)===t&&a.forEach(_=>{i.push(_.id)})}),i}close_stream(t){const i=this.get_fns_from_targets(t);for(const a of i){const s=this.submissions.get(a);s&&(s.close_stream(),this.submissions.delete(a)),this.loading_stati.update({status:"complete",fn_index:a,eta:0,queue:!1,stream_state:"closed"})}this.update_loading_stati_state()}}function lt(c){return typeof c=="object"&&c!==null&&"__type__"in c&&c?.__type__==="update"}function dt(c,t){return t?c==="always_last"?"defer":c==="multiple"?"run":c==="once"?"skip":"run":"run"}function ct(c,t,i,a){const s=t?i===1:a===1;try{return new ke("__fn_args",`  let result = await (${c})(...__fn_args);
  if (typeof result === "undefined") return [];
  return (${s} && !Array.isArray(result)) ? [result] : result;`)}catch(o){throw o}}function _t(c,t){let i=new Map,a=t,s=0;for(;s<100;){const o=i.get(a)||c.find(_=>_.id===a);if(!o||(i.set(o.id,o),o.trigger_after===null||o.trigger_after===void 0))break;a=o.trigger_after,s+=1}return a}var ut=e.from_html("<!> <!>",1),ft=e.from_html('<button class="show-api svelte-zxu34v"><!> <img class="svelte-zxu34v"/></button>'),gt=e.from_html('<div class="divider show-api-divider svelte-zxu34v">·</div> <a href="https://gradio.app" class="built-with svelte-zxu34v" target="_blank" rel="noreferrer"> <img class="svelte-zxu34v"/></a>',1),pt=e.from_html('<div>·</div> <button class="settings svelte-zxu34v"> <img class="svelte-zxu34v"/></button>',1),ht=e.from_html('<footer class="svelte-zxu34v"><!> <!> <button> <img class="svelte-zxu34v"/></button> <div class="divider svelte-zxu34v">·</div> <!></footer>'),vt=e.from_html('<div id="api-recorder-container" class="svelte-zxu34v"><!></div>'),mt=e.from_html('<div class="api-docs svelte-zxu34v"><div class="backdrop svelte-zxu34v"></div> <div class="api-docs-wrap svelte-zxu34v"><!></div></div>'),bt=e.from_html('<div class="api-docs svelte-zxu34v"><div class="backdrop svelte-zxu34v"></div> <div class="api-docs-wrap svelte-zxu34v"><!></div></div>'),wt=e.from_html('<div class="wrap svelte-zxu34v"><div class="contain svelte-zxu34v"><!> <!></div> <!> <!> <!> <!></div> <!>',1);function yt(c,t){e.push(t,!0);const i=()=>e.store_get(Ie,"$reactive_formatter",s),a=()=>e.store_get(re,"$is_screen_recording",s),[s,o]=e.setup_stores();e.prop(t,"render_complete",3,!1);let _=e.prop(t,"ready",15,!1),u=e.prop(t,"reload_count",11,0),p=e.prop(t,"add_new_message",15);t.components.forEach(n=>{n.props.i18n||(n.props.i18n=i())});let b=e.state(e.proxy([]));function M(n,r,f){if(r==="share"){const{title:m,description:k}=f}else if(r==="error")U("Error",f,-1,r,10,!0);else if(r==="warning")U("Warning",f,-1,r,10,!0);else if(r==="info")U("Info",f,-1,r,10,!0);else if(r==="gradio_expand"||r==="gradio_tab_select"){const m=r==="gradio_expand"?n:f.component_id;l.render_previously_invisible_children(m)}else r=="clear_status"?(l.update_state(n,{loading_status:{}},!1),d.clear_loading_status(n)):r=="close_stream"?d.close_stream(n):(r==="select"&&n in l.initial_tabs&&(n=f.id),d.dispatch({type:"event",event_name:r,target_id:n,event_data:f}))}let l=new Ze(t.components,t.layout,t.dependencies,{root:t.root,theme:t.theme_mode,version:t.version,api_prefix:t.api_prefix,max_file_size:t.max_file_size,autoscroll:t.autoscroll},t.app,i(),M);Te(Ne,{register:l.register_component.bind(l),dispatcher:M});let x=e.state(e.proxy([])),h=e.state(null),F=n=>{e.set(h,n,!0),e.get(g)&&e.set(x,[...e.get(x),e.get(h)],!0)},d=new ot(t.dependencies,t.app,l.update_state.bind(l),l.get_state.bind(l),l.rerender.bind(l),U,F);e.user_effect(()=>{u(),Ue(()=>{l.reload(t.components,t.layout,t.dependencies,{root:t.root,theme:t.theme_mode,version:t.version,api_prefix:t.api_prefix,max_file_size:t.max_file_size,autoscroll:t.autoscroll}),d.reload(t.dependencies,l.update_state.bind(l),l.get_state.bind(l),l.rerender.bind(l),t.app)})});let O=350,w=e.derived(()=>t.search_params.get("view")==="api"&&t.footer_links.includes("api")),z=e.derived(()=>t.search_params.get("view")==="settings"),g=e.derived(()=>t.search_params.get("view")==="api-recorder"&&t.footer_links.includes("api")),E=!0,B=!0,D=null,v=null,P=null,N=e.state(null);async function ee(){if(!D||!v){const n=await X(()=>import("./ApiDocs-DhmJoXaX.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]),import.meta.url),r=await X(()=>import("./ApiRecorder-BwEQH2K3.js"),__vite__mapDeps([26,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,27]),import.meta.url);D||(D=n?.default),v||(v=r?.default)}}async function ae(){v||(v=(await X(()=>import("./ApiRecorder-BwEQH2K3.js"),__vite__mapDeps([26,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,27]),import.meta.url)).default)}async function Z(){P||(P=(await X(()=>import("./Settings-DLvPASMF.js"),__vite__mapDeps([28,2,3,4,5,1,29,10,11,12,13,14,15,20,21,30,31,32,33,34,22,23,24,35]),import.meta.url)).default)}async function te(){if(!e.get(N)){const n=await X(()=>import("./Index-3J0opp2M.js"),__vite__mapDeps([36,3,4,37,2,5,10,20,11,12,13,14,15,21,38,39,40,41,42,43,44,45]),import.meta.url);e.set(N,n.default,!0)}}async function W(n){e.set(g,!1),n&&await ee(),e.set(w,n);let r=new URLSearchParams(window.location.search);n?r.set("view","api"):r.delete("view"),history.replaceState(null,"","?"+r.toString())}async function H(n){n&&await Z();let r=new URLSearchParams(window.location.search);n?r.set("view","settings"):r.delete("view"),history.replaceState(null,"","?"+r.toString()),e.set(z,!e.get(z))}function U(n,r,f,m,k=10,A=!1){A&&e.get(b).push({title:n,message:r,fn_index:f,type:m,id:++ne,duration:k,visible:A})}p(U);let ne=-1;i()("blocks.long_requests_queue"),i()("blocks.connection_can_break"),i()("blocks.waiting_for_inputs");let re=Ve(!1),ce=0,J;function _e(){if("parentIFrame"in window){const n=J.children[0].getBoundingClientRect();if(!n)return;window.parentIFrame?.size(n.bottom+ce+32)}}function ue(){a()?tt():et()}qe(()=>{"parentIFrame"in window&&window.parentIFrame?.autoResize(!1);const n=new MutationObserver(_e),r=new ResizeObserver(_e);return n.observe(J,{childList:!0,subtree:!0,attributes:!0}),r.observe(J),l.ready.then(()=>{_(!0),d.dispatch_load_events()}),t.vibe_mode&&te(),()=>{n.disconnect(),r.disconnect()}});function Ee(n){e.set(b,e.get(b).filter(r=>r.id!==n),!0)}var fe=wt();e.head("zxu34v",n=>{var r=ut(),f=e.first_child(r);{var m=y=>{e.deferred_template_effect(()=>{e.document.title=t.title??""})};e.if(f,y=>{t.control_page_title&&y(m)})}var k=e.sibling(f,2);{var A=y=>{var R=e.comment(),se=e.first_child(R);e.html(se,()=>`<style>${Ge(t.css,t.version)}</style>`),e.append(y,R)};e.if(k,y=>{t.css&&y(A)})}e.append(n,r)});var ie=e.first_child(fe);let ge;var Q=e.child(ie);let pe;var he=e.child(Q);Ce(he,{get node(){return l.root}});var Le=e.sibling(he,2);{var Se=n=>{var r=ht(),f=e.child(r);{var m=C=>{var L=ft(),T=e.child(L);{var q=S=>{var G=e.text();e.template_effect(K=>e.set_text(G,K),[()=>i()("errors.use_via_api_or_mcp")]),e.append(S,G)},j=S=>{var G=e.text();e.template_effect(K=>e.set_text(G,K),[()=>i()("errors.use_via_api")]),e.append(S,G)};e.if(T,S=>{t.app.config?.mcp_server?S(q):S(j,!1)})}var I=e.sibling(T,2);e.reset(L),e.template_effect(S=>{e.set_attribute(I,"src",Je),e.set_attribute(I,"alt",S)},[()=>i()("common.logo")]),e.event("click",L,()=>{W(!e.get(w))}),e.event("mouseenter",L,()=>{ee(),ae()}),e.append(C,L)};e.if(f,C=>{t.footer_links.includes("api")&&C(m)})}var k=e.sibling(f,2);{var A=C=>{var L=gt(),T=e.sibling(e.first_child(L),2),q=e.child(T),j=e.sibling(q);e.reset(T),e.template_effect((I,S)=>{e.set_text(q,`${I??""} `),e.set_attribute(j,"src",He),e.set_attribute(j,"alt",S)},[()=>i()("common.built_with_gradio"),()=>i()("common.logo")]),e.append(C,L)};e.if(k,C=>{t.footer_links.includes("gradio")&&C(A)})}var y=e.sibling(k,2);let R;var se=e.child(y),we=e.sibling(se);e.reset(y);var Fe=e.sibling(y,4);{var Pe=C=>{var L=pt(),T=e.first_child(L);let q;var j=e.sibling(T,2),I=e.child(j),S=e.sibling(I);e.reset(j),e.template_effect((G,K)=>{q=e.set_class(T,1,"divider svelte-zxu34v",null,q,{hidden:!a()}),e.set_text(I,`${G??""} `),e.set_attribute(S,"src",Qe),e.set_attribute(S,"alt",K)},[()=>i()("common.settings"),()=>i()("common.settings")]),e.event("click",j,()=>{H(!e.get(z))}),e.event("mouseenter",j,()=>{Z()}),e.append(C,L)};e.if(Fe,C=>{t.footer_links.includes("settings")&&C(Pe)})}e.reset(r),e.template_effect((C,L)=>{R=e.set_class(y,1,"record svelte-zxu34v",null,R,{hidden:!a()}),e.set_text(se,`${C??""} `),e.set_attribute(we,"src",Ke),e.set_attribute(we,"alt",L)},[()=>i()("common.stop_recording"),()=>i()("common.stop_recording")]),e.event("click",y,()=>{ue()}),e.bind_element_size(r,"clientHeight",C=>ce=C),e.append(n,r)};e.if(Le,n=>{t.footer_links.length>0&&n(Se)})}e.reset(Q),e.bind_this(Q,n=>J=n,()=>J);var ve=e.sibling(Q,2);{var ze=n=>{var r=vt(),f=e.child(r);e.component(f,()=>v,(m,k)=>{k(m,{get api_calls(){return e.get(x)},get dependencies(){return t.dependencies}})}),e.reset(r),e.event("click",r,()=>{W(!0),e.set(g,!1)}),e.append(n,r)};e.if(ve,n=>{e.get(g)&&v&&n(ze)})}var me=e.sibling(ve,2);{var Re=n=>{var r=mt(),f=e.child(r),m=e.sibling(f,2),k=e.child(m);e.component(k,()=>D,(A,y)=>{y(A,{get root_node(){return l.root},get dependencies(){return t.dependencies},get root(){return t.root},get app(){return t.app},get space_id(){return t.space_id},get api_calls(){return e.get(x)},get username(){return t.username},get last_api_call(){return e.get(h)},$$events:{close:R=>{W(!1),e.set(x,[],!0),e.set(g,e.set(g,R.detail?.api_recorder_visible))}}})}),e.reset(m),e.reset(r),e.event("click",f,()=>{W(!1)}),e.append(n,r)};e.if(me,n=>{e.get(w)&&l.root&&D&&n(Re)})}var be=e.sibling(me,2);{var Oe=n=>{var r=bt(),f=e.child(r),m=e.sibling(f,2),k=e.child(m);e.component(k,()=>P,(A,y)=>{y(A,{onclose:()=>{H(!1)},start_recording:()=>{ue()},get pwa_enabled(){return t.app.config.pwa},get root(){return t.root},get space_id(){return t.space_id},get i18n(){return i()},get allow_zoom(){return E},set allow_zoom(R){E=R},get allow_video_trim(){return B},set allow_video_trim(R){B=R}})}),e.reset(m),e.reset(r),e.event("click",f,()=>{H(!1)}),e.append(n,r)};e.if(be,n=>{e.get(z)&&t.app.config&&l.root&&P&&n(Oe)})}var Ae=e.sibling(be,2);{var Me=n=>{var r=e.comment(),f=e.first_child(r);e.component(f,()=>e.get(N),(m,k)=>{k(m,{get app(){return t.app},get root(){return t.root}})}),e.append(n,r)};e.if(Ae,n=>{t.vibe_mode&&e.get(N)&&n(Me)})}e.reset(ie);var De=e.sibling(ie,2);{var je=n=>{Be(n,{get messages(){return e.get(b)},on_close:Ee})};e.if(De,n=>{e.get(b)&&n(je)})}e.template_effect(()=>{ge=e.set_style(ie,"",ge,{"min-height":t.app_mode?"100%":"auto"}),pe=e.set_style(Q,"",pe,{"flex-grow":t.app_mode?"1":"auto","margin-right":t.vibe_mode?`${O}px`:"0"})}),e.append(c,fe),e.pop(),o()}const At=Object.freeze(Object.defineProperty({__proto__:null,default:yt},Symbol.toStringTag,{value:"Module"}));export{At as B,Je as a,Qe as s};
