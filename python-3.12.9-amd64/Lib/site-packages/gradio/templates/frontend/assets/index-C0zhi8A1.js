import"./svelte/svelte_internal_flags_legacy.js";import"./svelte/svelte_internal_flags_async.js";import*as e from"./svelte/svelte_internal_client.js";import{createEventDispatcher as ae,tick as le}from"./svelte/svelte_svelte.js";import{U as se}from"./ModifyUpload-CMHuWP2V.js";import{b as oe,V as ne,o as ie,B as Q,U as ue}from"./IconButtonWrapper-BWheMLkN.js";import"./i18n-DMKL1Q3B.js";import{Webcam as de}from"./Index-D_DS9HwE.js";import{a as R}from"./Video-06U9X4-1.js";import{l as tt,p as rt}from"./Video-06U9X4-1.js";import{P as pe,V as _e}from"./VideoPreview-LOe65y8L.js";import{default as lt}from"./Example-D5jS4lwM.js";import{G as ce}from"./utils.svelte-Ceck75cM.js";import{S as X}from"./StreamingBar-DrfQmzG9.js";import"./index-BXZmp9-u.js";import"./svelte/svelte_animate.js";import"./svelte/svelte_attachments.js";import"./svelte/svelte_easing.js";import"./svelte/svelte_internal_flags_tracing.js";import"./svelte/svelte_internal_server.js";import"./svelte/svelte_legacy.js";import"./svelte/svelte_motion.js";import"./svelte/svelte_reactivity.js";import"./svelte/svelte_reactivity_window.js";import"./svelte/svelte_server.js";import"./svelte/svelte_store.js";import"./svelte/svelte_transition.js";import"./svelte/svelte_events.js";import"./MarkdownCode-U4KoZ7qK.js";import"./prism-python-iiDAHIFD.js";import"./ImagePreview-CahJZlWj.js";import"./ShareButton-DLehHS0O.js";import"./FullscreenButton-B8JPMBMa.js";import"./Image-Bdf4wQSw.js";import"./Example-1lv5JGKJ.js";var ge=e.from_html('<div class="upload-container svelte-ey25pz"><!></div>'),he=e.from_html('<div class="file-name svelte-ey25pz"> </div> <div class="file-size svelte-ey25pz"> </div>',1),ve=e.from_html('<!> <div data-testid="video" class="video-container svelte-ey25pz"><!> <!></div>',1);function me(A,a){e.push(a,!1);let l=e.prop(a,"value",12,null),b=e.prop(a,"subtitle",12,null),D=e.prop(a,"sources",28,()=>["webcam","upload"]),t=e.prop(a,"label",12,void 0),I=e.prop(a,"show_download_button",12,!1),S=e.prop(a,"show_label",12,!0),d=e.prop(a,"webcam_options",12),x=e.prop(a,"include_audio",12),z=e.prop(a,"autoplay",12),V=e.prop(a,"root",12),w=e.prop(a,"i18n",12),g=e.prop(a,"active_source",12,"webcam"),q=e.prop(a,"handle_reset_value",12,()=>{}),L=e.prop(a,"max_file_size",12,null),B=e.prop(a,"upload",12),T=e.prop(a,"stream_handler",12),o=e.prop(a,"loop",12),c=e.prop(a,"uploading",12,!1),h=e.prop(a,"upload_promise",12,null),y=e.prop(a,"playback_position",12,0),U=e.mutable_source(!1);const v=ae();function P({detail:r}){l(r),v("change",r),v("upload",r)}function k(){l(null),v("change",null),v("clear")}function W(r){e.set(U,!0),v("change",r)}function j({detail:r}){v("change",r)}let s=e.mutable_source(!1);e.legacy_pre_effect(()=>e.get(s),()=>{v("drag",e.get(s))}),e.legacy_pre_effect_reset();var m={get value(){return l()},set value(r){l(r),e.flush()},get subtitle(){return b()},set subtitle(r){b(r),e.flush()},get sources(){return D()},set sources(r){D(r),e.flush()},get label(){return t()},set label(r){t(r),e.flush()},get show_download_button(){return I()},set show_download_button(r){I(r),e.flush()},get show_label(){return S()},set show_label(r){S(r),e.flush()},get webcam_options(){return d()},set webcam_options(r){d(r),e.flush()},get include_audio(){return x()},set include_audio(r){x(r),e.flush()},get autoplay(){return z()},set autoplay(r){z(r),e.flush()},get root(){return V()},set root(r){V(r),e.flush()},get i18n(){return w()},set i18n(r){w(r),e.flush()},get active_source(){return g()},set active_source(r){g(r),e.flush()},get handle_reset_value(){return q()},set handle_reset_value(r){q(r),e.flush()},get max_file_size(){return L()},set max_file_size(r){L(r),e.flush()},get upload(){return B()},set upload(r){B(r),e.flush()},get stream_handler(){return T()},set stream_handler(r){T(r),e.flush()},get loop(){return o()},set loop(r){o(r),e.flush()},get uploading(){return c()},set uploading(r){c(r),e.flush()},get upload_promise(){return h()},set upload_promise(r){h(r),e.flush()},get playback_position(){return y()},set playback_position(r){y(r),e.flush()}};e.init();var J=ve(),K=e.first_child(J);{let r=e.derived_safe_equal(()=>t()||"Video");oe(K,{get show_label(){return S()},get Icon(){return ne},get label(){return e.get(r)}})}var M=e.sibling(K,2),N=e.child(M);{var Y=r=>{var G=ge(),C=e.child(G);{var F=u=>{{let f=e.derived_safe_equal(()=>(e.deep_read_state(w()),e.untrack(()=>w()("video.drop_to_upload"))));se(u,{filetype:"video/x-m4v,video/*",get max_file_size(){return L()},get root(){return V()},get upload(){return B()},get stream_handler(){return T()},get aria_label(){return e.get(f)},get upload_promise(){return h()},set upload_promise(n){h(n)},get dragging(){return e.get(s)},set dragging(n){e.set(s,n)},get uploading(){return c()},set uploading(n){c(n)},$$events:{load:P,error:({detail:n})=>v("error",n)},children:(n,E)=>{var p=e.comment(),_=e.first_child(p);e.slot(_,a,"default",{},null),e.append(n,p)},$$slots:{default:!0},$$legacy:!0})}},H=u=>{var f=e.comment(),n=e.first_child(f);{var E=p=>{de(p,{get root(){return V()},get mirror_webcam(){return e.deep_read_state(d()),e.untrack(()=>d().mirror)},get webcam_constraints(){return e.deep_read_state(d()),e.untrack(()=>d().constraints)},get include_audio(){return x()},mode:"video",get i18n(){return w()},get upload(){return B()},stream_every:1,$$events:{error(_){e.bubble_event.call(this,a,_)},capture:j,start_recording(_){e.bubble_event.call(this,a,_)},stop_recording(_){e.bubble_event.call(this,a,_)}}})};e.if(n,p=>{g()==="webcam"&&p(E)},!0)}e.append(u,f)};e.if(C,u=>{g()==="upload"?u(F):u(H,!1)})}e.reset(G),e.append(r,G)},Z=r=>{var G=e.comment(),C=e.first_child(G);{var F=u=>{var f=e.comment(),n=e.first_child(f);e.key(n,()=>(e.deep_read_state(l()),e.untrack(()=>l()?.url)),E=>{{let p=e.derived_safe_equal(()=>(e.deep_read_state(b()),e.untrack(()=>b()?.url))),_=e.derived_safe_equal(()=>(e.deep_read_state(d()),e.deep_read_state(g()),e.untrack(()=>d().mirror&&g()==="webcam")));pe(E,{get upload(){return B()},get root(){return V()},interactive:!0,get autoplay(){return z()},get src(){return e.deep_read_state(l()),e.untrack(()=>l().url)},get subtitle(){return e.get(p)},is_stream:!1,get mirror(){return e.get(_)},get label(){return t()},handle_change:W,get handle_reset_value(){return q()},get loop(){return o()},get value(){return l()},get i18n(){return w()},get show_download_button(){return I()},handle_clear:k,get has_change_history(){return e.get(U)},get playback_position(){return y()},set playback_position(i){y(i)},$$events:{play(i){e.bubble_event.call(this,a,i)},pause(i){e.bubble_event.call(this,a,i)},stop(i){e.bubble_event.call(this,a,i)},end(i){e.bubble_event.call(this,a,i)},error(i){e.bubble_event.call(this,a,i)}},$$legacy:!0})}}),e.append(u,f)},H=u=>{var f=e.comment(),n=e.first_child(f);{var E=p=>{var _=he(),i=e.first_child(_),ee=e.child(i,!0);e.reset(i);var O=e.sibling(i,2),te=e.child(O,!0);e.reset(O),e.template_effect(re=>{e.set_text(ee,(e.deep_read_state(l()),e.untrack(()=>l().orig_name||l().url))),e.set_text(te,re)},[()=>(e.deep_read_state(R),e.deep_read_state(l()),e.untrack(()=>R(l().size)))]),e.append(p,_)};e.if(n,p=>{e.deep_read_state(l()),e.untrack(()=>l().size)&&p(E)},!0)}e.append(u,f)};e.if(C,u=>{e.deep_read_state(l()),e.untrack(()=>l()?.url)?u(F):u(H,!1)},!0)}e.append(r,G)};e.if(N,r=>{e.deep_read_state(l()),e.untrack(()=>l()===null||l()?.url===void 0)?r(Y):r(Z,!1)})}var $=e.sibling(N,2);return ie($,{get sources(){return D()},handle_clear:k,get active_source(){return g()},set active_source(r){g(r)},$$legacy:!0}),e.reset(M),e.append(A,J),e.pop(m)}var fe=e.from_html("<!> <!>",1),be=e.from_html("<!> <!>",1);function Ze(A,a){e.push(a,!0);const l=e.rest_props(a,["$$slots","$$events","$$legacy"]);let b=e.state(void 0);class D extends ce{async get_data(){return e.get(b)&&(await e.get(b),await le()),await super.get_data()}}const t=new D(l);let I=e.state(e.proxy(t.props.value)),S=e.state(!1),d=e.state(!1),x=e.derived(()=>t.props.sources?t.props.sources[0]:void 0),z=t.props.value;e.user_effect(()=>{e.get(I)!=t.props.value&&(e.set(I,t.props.value,!0),t.dispatch("change"))});const V=()=>{z===null||t.props.value===z||(t.props.value=z)};function w({detail:o}){o!=null?t.props.value=o:t.props.value=null}function g({detail:o}){const[c,h]=o.includes("Invalid file type")?["warning","complete"]:["error","error"];t.shared.loading_status.status=h,t.shared.loading_status.message=o,t.dispatch(c,o)}var q=e.comment(),L=e.first_child(q);{var B=o=>{{let c=e.derived(()=>t.props.value===null&&e.get(x)==="upload"?"dashed":"solid"),h=e.derived(()=>e.get(d)?"focus":"base"),y=e.derived(()=>t.props.height||void 0);Q(o,{get visible(){return t.shared.visible},get variant(){return e.get(c)},get border_mode(){return e.get(h)},padding:!1,get elem_id(){return t.shared.elem_id},get elem_classes(){return t.shared.elem_classes},get height(){return e.get(y)},get width(){return t.props.width},get container(){return t.shared.container},get scale(){return t.shared.scale},get min_width(){return t.shared.min_width},allow_overflow:!1,children:(U,v)=>{var P=fe(),k=e.first_child(P);X(k,e.spread_props({get autoscroll(){return t.shared.autoscroll},get i18n(){return t.i18n}},()=>t.shared.loading_status,{on_clear_status:()=>t.dispatch("clear_status",t.shared.loading_status)}));var W=e.sibling(k,2);{let j=e.derived(()=>(t.props.buttons||[]).includes("share")),s=e.derived(()=>(t.props.buttons||["download"]).includes("download"));_e(W,{get value(){return t.props.value},get subtitle(){return t.props.subtitles},get label(){return t.shared.label},get show_label(){return t.shared.show_label},get autoplay(){return t.props.autoplay},get loop(){return t.props.loop},get show_share_button(){return e.get(j)},get show_download_button(){return e.get(s)},get i18n(){return t.i18n},upload:(...m)=>t.shared.client.upload(...m),get playback_position(){return t.props.playback_position},set playback_position(m){t.props.playback_position=m},$$events:{play:()=>t.dispatch("play"),pause:()=>t.dispatch("pause"),stop:()=>t.dispatch("stop"),end:()=>t.dispatch("end"),share:({detail:m})=>t.dispatch("share",m),error:({detail:m})=>t.dispatch("error",m)}})}e.append(U,P)},$$slots:{default:!0}})}},T=o=>{{let c=e.derived(()=>t.props.value===null&&e.get(x)==="upload"?"dashed":"solid"),h=e.derived(()=>e.get(d)?"focus":"base"),y=e.derived(()=>t.props.height||void 0);Q(o,{get visible(){return t.shared.visible},get variant(){return e.get(c)},get border_mode(){return e.get(h)},padding:!1,get elem_id(){return t.shared.elem_id},get elem_classes(){return t.shared.elem_classes},get height(){return e.get(y)},get width(){return t.props.width},get container(){return t.shared.container},get scale(){return t.shared.scale},get min_width(){return t.shared.min_width},allow_overflow:!1,children:(U,v)=>{var P=be(),k=e.first_child(P);X(k,e.spread_props({get autoscroll(){return t.shared.autoscroll},get i18n(){return t.i18n}},()=>t.shared.loading_status,{on_clear_status:()=>t.dispatch("clear_status",t.shared.loading_status)}));var W=e.sibling(k,2);{let j=e.derived(()=>(t.props.buttons||[]).includes("download"));me(W,{get value(){return t.props.value},get subtitle(){return t.props.subtitles},get label(){return t.shared.label},get show_label(){return t.shared.show_label},get show_download_button(){return e.get(j)},get sources(){return t.props.sources},get active_source(){return e.get(x)},get webcam_options(){return t.props.webcam_options},get include_audio(){return t.props.include_audio},get autoplay(){return t.props.autoplay},get root(){return t.shared.root},get loop(){return t.props.loop},handle_reset_value:V,get i18n(){return t.i18n},get max_file_size(){return t.shared.max_file_size},upload:(...s)=>t.shared.client.upload(...s),stream_handler:(...s)=>t.shared.client.stream(...s),get upload_promise(){return e.get(b)},set upload_promise(s){e.set(b,s,!0)},get uploading(){return e.get(S)},set uploading(s){e.set(S,s,!0)},get playback_position(){return t.props.playback_position},set playback_position(s){t.props.playback_position=s},$$events:{change:w,drag:({detail:s})=>e.set(d,s,!0),error:g,clear:()=>{t.props.value=null,t.dispatch("clear")},play:()=>t.dispatch("play"),pause:()=>t.dispatch("pause"),upload:()=>t.dispatch("upload"),stop:()=>t.dispatch("stop"),end:()=>t.dispatch("end"),start_recording:()=>t.dispatch("start_recording"),stop_recording:()=>t.dispatch("stop_recording")},children:(s,m)=>{ue(s,{get i18n(){return t.i18n},type:"video"})},$$slots:{default:!0}})}e.append(U,P)},$$slots:{default:!0}})}};e.if(L,o=>{t.shared.interactive?o(T,!1):o(B)})}e.append(A,q),e.pop()}export{lt as BaseExample,me as BaseInteractiveVideo,pe as BasePlayer,_e as BaseStaticVideo,Ze as default,tt as loaded,rt as playable,R as prettyBytes};
