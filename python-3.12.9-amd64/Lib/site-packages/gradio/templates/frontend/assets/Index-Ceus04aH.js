import"./svelte/svelte_internal_flags_async.js";import*as e from"./svelte/svelte_internal_client.js";import"./i18n-DMKL1Q3B.js";import{G as Z}from"./utils.svelte-Ceck75cM.js";import{B as J,b as K,F as N}from"./IconButtonWrapper-BWheMLkN.js";import"./svelte/svelte_internal_flags_legacy.js";import{createEventDispatcher as E}from"./svelte/svelte_svelte.js";import{S as Q}from"./StreamingBar-DrfQmzG9.js";import"./svelte/svelte_store.js";import"./index-BXZmp9-u.js";import"./svelte/svelte_animate.js";import"./svelte/svelte_attachments.js";import"./svelte/svelte_easing.js";import"./svelte/svelte_internal_flags_tracing.js";import"./svelte/svelte_internal_server.js";import"./svelte/svelte_legacy.js";import"./svelte/svelte_motion.js";import"./svelte/svelte_reactivity.js";import"./svelte/svelte_reactivity_window.js";import"./svelte/svelte_server.js";import"./svelte/svelte_transition.js";import"./svelte/svelte_events.js";import"./MarkdownCode-U4KoZ7qK.js";import"./prism-python-iiDAHIFD.js";var R=e.from_svg('<svg width="100%" height="100%" viewBox="0 0 14 17" version="1.1" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g transform="matrix(1,0,0,1,-10.6667,-7.73588)"><path d="M12.7,24.033C12.256,24.322 11.806,24.339 11.351,24.084C10.896,23.829 10.668,23.434 10.667,22.9L10.667,9.1C10.667,8.567 10.895,8.172 11.351,7.916C11.807,7.66 12.256,7.677 12.7,7.967L23.567,14.867C23.967,15.133 24.167,15.511 24.167,16C24.167,16.489 23.967,16.867 23.567,17.133L12.7,24.033Z" style="fill:currentColor;fill-rule:nonzero;"></path></g></svg>');function X(w){var l=R();e.append(w,l)}var Y=e.from_html('<input type="checkbox"/>');function $(w,l){e.push(l,!1);let n=e.prop(l,"value",12),t=e.prop(l,"disabled",12);const s=E();var f={get value(){return n()},set value(g){n(g),e.flush()},get disabled(){return t()},set disabled(g){t(g),e.flush()}};e.init();var i=Y();e.remove_input_defaults(i);let _;return e.template_effect(()=>{i.disabled=t(),_=e.set_class(i,1,"svelte-3g0mcl",null,_,{disabled:t()&&!n()})}),e.bind_checked(i,n),e.event("input",i,()=>s("change",!n())),e.append(w,i),e.pop(f)}const ee="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23888888'%20d='M6%202c-1.1%200-1.99.9-1.99%202L4%2020c0%201.1.89%202%201.99%202H18c1.1%200%202-.9%202-2V8l-6-6H6zm7%207V3.5L18.5%209H13z'/%3e%3c/svg%3e",te="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20viewBox='0%200%2032%2032'%20version='1.1'%20id='svg7'%20sodipodi:docname='light-folder-new.svg'%20inkscape:version='1.3.2%20(091e20e,%202023-11-25)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3csodipodi:namedview%20id='namedview7'%20pagecolor='%23ffffff'%20bordercolor='%23000000'%20borderopacity='0.25'%20inkscape:showpageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20inkscape:zoom='7.375'%20inkscape:cx='15.932203'%20inkscape:cy='16'%20inkscape:window-width='1312'%20inkscape:window-height='529'%20inkscape:window-x='0'%20inkscape:window-y='38'%20inkscape:window-maximized='0'%20inkscape:current-layer='svg7'%20/%3e%3cdefs%20id='defs6'%3e%3cclipPath%20id='clipPath1'%3e%3cpath%20d='m69.63%2012.145h-.052c-22.727-.292-46.47%204.077-46.709%204.122-2.424.451-4.946%202.974-5.397%205.397-.044.237-4.414%2023.983-4.122%2046.71-.292%2022.777%204.078%2046.523%204.122%2046.761.451%202.423%202.974%204.945%205.398%205.398.237.044%2023.982%204.413%2046.709%204.121%2022.779.292%2046.524-4.077%2046.761-4.121%202.423-.452%204.946-2.976%205.398-5.399.044-.236%204.413-23.981%204.121-46.709.292-22.777-4.077-46.523-4.121-46.761-.453-2.423-2.976-4.946-5.398-5.397-.238-.045-23.984-4.414-46.71-4.122'%20id='path1'%20/%3e%3c/clipPath%3e%3clinearGradient%20gradientUnits='userSpaceOnUse'%20y2='352.98'%20x2='-601.15'%20y1='663.95'%20x1='-591.02'%20id='2'%3e%3cstop%20stop-color='%23a0a0a0'%20id='stop1'%20/%3e%3cstop%20offset='1'%20stop-color='%23aaa'%20id='stop2'%20/%3e%3c/linearGradient%3e%3clinearGradient%20gradientUnits='userSpaceOnUse'%20y2='354.29'%20x2='-704.05'%20y1='647.77'%20x1='-701.19'%20id='1'%3e%3cstop%20stop-color='%23acabab'%20id='stop3'%20/%3e%3cstop%20offset='1'%20stop-color='%23d4d4d4'%20id='stop4'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='0'%20x1='59.12'%20y1='-19.888'%20x2='59.15'%20y2='-37.783'%20gradientUnits='userSpaceOnUse'%20gradientTransform='matrix(4.17478%200%200%204.16765-1069.7%20447.73)'%3e%3cstop%20stop-color='%23a0a0a0'%20id='stop5'%20/%3e%3cstop%20offset='1'%20stop-color='%23bdbdbd'%20id='stop6'%20/%3e%3c/linearGradient%3e%3c/defs%3e%3cg%20transform='matrix(.07089%200%200%20.07017%2023.295-40.67)'%20fill='%2360aae5'%20id='g7'%20style='fill:%23888888;fill-opacity:1'%3e%3cpath%20transform='matrix(.7872%200%200%20.79524%20415.34%20430.11)'%20d='m-884.1%20294.78c-4.626%200-8.349%203.718-8.349%208.335v161.41l468.19%201v-121.2c0-4.618-3.724-8.335-8.35-8.335h-272.65c-8.51.751-9.607-.377-13.812-5.981-5.964-7.968-14.969-21.443-20.84-29.21-4.712-6.805-5.477-6.02-13.292-6.02z'%20fill='url(%230)'%20color='%23000'%20id='path6'%20style='fill:%23888888;fill-opacity:1'%20/%3e%3crect%20transform='matrix(.7872%200%200%20.79524%20415.34%20430.11)'%20y='356.85'%20x='-890.28'%20height='295.13'%20width='463.85'%20fill='url(%231)'%20stroke='url(%231)'%20stroke-width='2.378'%20rx='9.63'%20id='rect6'%20style='fill:%23888888;fill-opacity:1'%20/%3e%3crect%20width='463.85'%20height='295.13'%20x='-890.28'%20y='356.85'%20transform='matrix(.7872%200%200%20.79524%20415.34%20430.11)'%20fill='none'%20stroke='url(%232)'%20stroke-linejoin='round'%20stroke-linecap='round'%20stroke-width='5.376'%20rx='9.63'%20id='rect7'%20style='fill:%23888888;fill-opacity:1'%20/%3e%3c/g%3e%3c/svg%3e";var re=e.from_html('<span class="no-checkbox svelte-6im0c4" aria-hidden="true"></span>'),le=e.from_html('<span role="button" aria-label="expand directory" tabindex="0"><!></span>'),se=e.from_html('<span class="file-icon svelte-6im0c4"><img alt="file icon" class="svelte-6im0c4"/></span>'),ie=e.from_html('<li class="svelte-6im0c4"><span class="wrap svelte-6im0c4"><!> <!> </span> <!></li>'),ae=e.from_html('<ul class="svelte-6im0c4"></ul>');function I(w,l){e.push(l,!1);let n=e.prop(l,"path",28,()=>[]),t=e.prop(l,"selected_files",28,()=>[]),s=e.prop(l,"selected_folders",28,()=>[]),f=e.prop(l,"is_selected_entirely",12,!1),i=e.prop(l,"interactive",12),_=e.prop(l,"ls_fn",12),g=e.prop(l,"file_count",12,"multiple"),m=e.prop(l,"valid_for_selection",12),v=e.mutable_source([]),d=e.mutable_source([]);const q=r=>{e.get(d).includes(r)?e.set(d,e.get(d).filter(C=>C!==r)):e.set(d,[...e.get(d),r])},a=r=>{e.get(d).includes(r)||e.set(d,[...e.get(d),r])};(async()=>(e.set(v,await _()(n())),m()&&e.set(v,[{name:".",type:"file"},...e.get(v)]),e.set(d,e.get(v).map((r,C)=>r.type==="folder"&&(f()||t().some(G=>G[0]===r.name))?C:null).filter(r=>r!==null))))();const o=E();e.legacy_pre_effect(()=>(e.deep_read_state(f()),e.get(v),e.deep_read_state(n())),()=>{f()&&e.get(v).forEach(r=>{o("check",{path:[...n(),r.name],checked:!0,type:r.type})})}),e.legacy_pre_effect_reset();var U={get path(){return n()},set path(r){n(r),e.flush()},get selected_files(){return t()},set selected_files(r){t(r),e.flush()},get selected_folders(){return s()},set selected_folders(r){s(r),e.flush()},get is_selected_entirely(){return f()},set is_selected_entirely(r){f(r),e.flush()},get interactive(){return i()},set interactive(r){i(r),e.flush()},get ls_fn(){return _()},set ls_fn(r){_(r),e.flush()},get file_count(){return g()},set file_count(r){g(r),e.flush()},get valid_for_selection(){return m()},set valid_for_selection(r){m(r),e.flush()}};e.init();var F=ae();return e.each(F,5,()=>e.get(v),e.index,(r,C,G)=>{let b=()=>e.get(C).type,u=()=>e.get(C).name,P=()=>e.get(C).valid;var j=ie(),z=e.child(j),B=e.child(z);{var S=c=>{var p=re();e.append(c,p)},D=c=>{{let p=e.derived_safe_equal(()=>!i()),y=e.derived_safe_equal(()=>(b(),e.deep_read_state(t()),e.deep_read_state(s()),u(),e.untrack(()=>(b()==="file"?t():s()).some(x=>x[0]===u()&&x.length===1))));$(c,{get disabled(){return e.get(p)},get value(){return e.get(y)},$$events:{change:x=>{let k=x.detail;o("check",{path:[...n(),u()],checked:k,type:b()}),b()==="folder"&&k&&a(G)}}})}};e.if(B,c=>{b()==="folder"&&g()==="single"?c(S):c(D,!1)})}var L=e.sibling(B,2);{var T=c=>{var p=le();let y;var x=e.child(p);X(x),e.reset(p),e.template_effect(k=>y=e.set_class(p,1,"icon svelte-6im0c4",null,y,k),[()=>({hidden:!e.get(d).includes(G)})]),e.event("click",p,e.stopPropagation(()=>q(G))),e.event("keydown",p,({key:k})=>{(k===" "||k==="Enter")&&q(G)}),e.append(c,p)},H=c=>{var p=se(),y=e.child(p);e.reset(p),e.template_effect(()=>e.set_attribute(y,"src",u()==="."?te:ee)),e.append(c,p)};e.if(L,c=>{b()==="folder"?c(T):c(H,!1)})}var O=e.sibling(L);e.reset(z);var M=e.sibling(z,2);{var V=c=>{var p=e.comment(),y=e.first_child(p);{let x=e.derived_safe_equal(()=>(e.deep_read_state(n()),u(),e.untrack(()=>[...n(),u()]))),k=e.derived_safe_equal(()=>(e.deep_read_state(t()),u(),e.untrack(()=>t().filter(h=>h[0]===u()).map(h=>h.slice(1))))),A=e.derived_safe_equal(()=>(e.deep_read_state(s()),u(),e.untrack(()=>s().filter(h=>h[0]===u()).map(h=>h.slice(1))))),W=e.derived_safe_equal(()=>(e.deep_read_state(s()),u(),e.untrack(()=>s().some(h=>h[0]===u()&&h.length===1))));I(y,{get path(){return e.get(x)},get selected_files(){return e.get(k)},get selected_folders(){return e.get(A)},get is_selected_entirely(){return e.get(W)},get interactive(){return i()},get ls_fn(){return _()},get file_count(){return g()},get valid_for_selection(){return P()},$$events:{check(h){e.bubble_event.call(this,l,h)}}})}e.append(c,p)};e.if(M,c=>{b(),e.get(d),e.untrack(()=>b()==="folder"&&e.get(d).includes(G))&&c(V)})}e.reset(j),e.template_effect(()=>e.set_text(O,` ${u()??""}`)),e.append(r,j)}),e.reset(F),e.append(w,F),e.pop(U)}var ne=e.from_html('<div class="file-wrap svelte-1gs1iku"><!></div>');function oe(w,l){e.push(l,!1);let n=e.prop(l,"interactive",12),t=e.prop(l,"file_count",12,"multiple"),s=e.prop(l,"value",28,()=>[]),f=e.prop(l,"ls_fn",12),i=e.mutable_source([]);const _=(a,o)=>a.join("/")===o.join("/"),g=(a,o)=>o.some(U=>_(U,a)),m=(a,o)=>a.join("/").startsWith(o.join("/"));var v={get interactive(){return n()},set interactive(a){n(a),e.flush()},get file_count(){return t()},set file_count(a){t(a),e.flush()},get value(){return s()},set value(a){s(a),e.flush()},get ls_fn(){return f()},set ls_fn(a){f(a),e.flush()}};e.init();var d=ne(),q=e.child(d);return I(q,{path:[],get selected_files(){return s()},get selected_folders(){return e.get(i)},get interactive(){return n()},get ls_fn(){return f()},get file_count(){return t()},valid_for_selection:!1,$$events:{check:a=>{const{path:o,checked:U,type:F}=a.detail;U?t()==="single"?s([o]):F==="folder"?g(o,e.get(i))||e.set(i,[...e.get(i),o]):g(o,s())||s([...s(),o]):(e.set(i,e.get(i).filter(r=>!m(o,r))),F==="folder"?(e.set(i,e.get(i).filter(r=>!m(r,o))),s(s().filter(r=>!m(r,o)))):s(s().filter(r=>!_(r,o))))}}}),e.reset(d),e.append(w,d),e.pop(v)}var de=e.from_html("<!> <!> <!>",1);function Ee(w,l){e.push(l,!0);const n=e.rest_props(l,["$$slots","$$events","$$legacy"]),t=new Z(n);let s=e.state(e.proxy(t.props.value)),f=e.derived(()=>[t.props.root_dir,t.props.glob,t.props.ignore_glob]);e.user_effect(()=>{e.get(s)!=t.props.value&&(e.set(s,t.props.value,!0),t.dispatch("change"))});{let i=e.derived(()=>t.props.value===null?"dashed":"solid");J(w,{get visible(){return t.shared.visible},get variant(){return e.get(i)},border_mode:"base",padding:!1,get elem_id(){return t.shared.elem_id},get elem_classes(){return t.shared.elem_classes},get container(){return t.shared.container},get scale(){return t.shared.scale},get min_width(){return t.shared.min_width},allow_overflow:!0,overflow_behavior:"auto",get height(){return t.props.height},get max_height(){return t.props.max_height},get min_height(){return t.props.min_height},children:(_,g)=>{var m=de(),v=e.first_child(m);Q(v,e.spread_props(()=>t.shared.loading_status,{get autoscroll(){return t.shared.autoscroll},get i18n(){return t.i18n},on_clear_status:()=>t.dispatch("clear_status",t.shared.loading_status)}));var d=e.sibling(v,2);{let a=e.derived(()=>t.shared.label||"FileExplorer");K(d,{get show_label(){return t.shared.show_label},get Icon(){return N},get label(){return e.get(a)},float:!1})}var q=e.sibling(d,2);e.key(q,()=>e.get(f),a=>{oe(a,{get file_count(){return t.props.file_count},get interactive(){return t.shared.interactive},get ls_fn(){return t.shared.server.ls},get value(){return t.props.value},set value(o){t.props.value=o}})}),e.append(_,m)},$$slots:{default:!0}})}e.pop()}export{Ee as default};
