import"./svelte/svelte_internal_flags_async.js";import*as t from"./svelte/svelte_internal_client.js";import{tick as U}from"./svelte/svelte_svelte.js";import{B as z,U as A}from"./IconButtonWrapper-BWheMLkN.js";import"./svelte/svelte_internal_flags_legacy.js";import"./i18n-DMKL1Q3B.js";import{G as C}from"./utils.svelte-Ceck75cM.js";import P from"./Gallery-B3xlDL2P.js";import{S as j}from"./StreamingBar-DrfQmzG9.js";import{BaseFileUpload as k}from"./Index-DzpRQEgD.js";import{default as _e}from"./Example-CR6Oggaq.js";import"./MarkdownCode-U4KoZ7qK.js";import"./index-BXZmp9-u.js";import"./svelte/svelte_animate.js";import"./svelte/svelte_attachments.js";import"./svelte/svelte_easing.js";import"./svelte/svelte_internal_flags_tracing.js";import"./svelte/svelte_internal_server.js";import"./svelte/svelte_legacy.js";import"./svelte/svelte_motion.js";import"./svelte/svelte_reactivity.js";import"./svelte/svelte_reactivity_window.js";import"./svelte/svelte_server.js";import"./svelte/svelte_store.js";import"./svelte/svelte_transition.js";import"./svelte/svelte_events.js";import"./prism-python-iiDAHIFD.js";import"./ShareButton-DLehHS0O.js";import"./FullscreenButton-B8JPMBMa.js";import"./ModifyUpload-CMHuWP2V.js";import"./Image-Bdf4wQSw.js";import"./ImagePreview-CahJZlWj.js";import"./Video-06U9X4-1.js";import"./index-tFQomdd2.js";import"./Example-C86RGnmZ.js";var F=t.from_html("<!> <!>",1);function he(_,m){t.push(m,!0);let n=t.state(void 0);class f extends C{async get_data(){return t.get(n)&&(await t.get(n),await U()),await super.get_data()}}const v=t.rest_props(m,["$$slots","$$events","$$legacy"]),e=new f(v);let d=t.state(!1),w=t.derived(()=>e.props.value===null?!0:e.props.value.length===0);function y(l){if(!e.props.value)return;const{index:o}=l.detail;e.dispatch("delete",l.detail),e.props.value=e.props.value.filter((a,p)=>p!==o),e.dispatch("change",e.props.value)}async function g(l){return(await Promise.all(l.map(async a=>{if(a.path?.toLowerCase().endsWith(".svg")&&a.url){const u=await(await fetch(a.url)).text();return{...a,url:`data:image/svg+xml,${encodeURIComponent(u)}`}}return a}))).map(a=>a.mime_type?.includes("video")?{video:a,caption:null}:{image:a,caption:null})}{let l=t.derived(()=>typeof e.props.height=="number"?e.props.height:void 0);z(_,{get visible(){return e.shared.visible},variant:"solid",padding:!1,get elem_id(){return e.shared.elem_id},get elem_classes(){return e.shared.elem_classes},get container(){return e.shared.container},get scale(){return e.shared.scale},get min_width(){return e.shared.min_width},allow_overflow:!1,get height(){return t.get(l)},get fullscreen(){return t.get(d)},set fullscreen(o){t.set(d,o,!0)},children:(o,a)=>{var p=F(),u=t.first_child(p);j(u,t.spread_props({get autoscroll(){return e.shared.autoscroll},get i18n(){return e.i18n}},()=>e.shared.loading_status,{on_clear_status:()=>e.dispatch("clear_status",e.shared.loading_status)}));var $=t.sibling(u,2);{var b=i=>{k(i,{value:null,get root(){return e.shared.root},get label(){return e.shared.label},get max_file_size(){return e.shared.max_file_size},file_count:"multiple",get file_types(){return e.props.file_types},get i18n(){return e.i18n},upload:(...s)=>e.shared.client.upload(...s),stream_handler:(...s)=>e.shared.client.stream(...s),get upload_promise(){return t.get(n)},set upload_promise(s){t.set(n,s,!0)},$$events:{upload:async s=>{const c=Array.isArray(s.detail)?s.detail:[s.detail];e.props.value=await g(c),e.dispatch("upload",e.props.value),e.dispatch("change",e.props.value)},error:({detail:s})=>{e.shared.loading_status=e.shared.loading_status||{},e.shared.loading_status.status="error",e.dispatch("error",s)}},children:(s,c)=>{A(s,{get i18n(){return e.i18n},type:"gallery"})},$$slots:{default:!0}})},x=i=>{{let s=t.derived(()=>e.props.buttons.includes("share")),c=t.derived(()=>e.props.buttons.includes("download")),G=t.derived(()=>e.props.buttons.includes("fullscreen"));P(i,{get label(){return e.shared.label},get show_label(){return e.shared.show_label},get columns(){return e.props.columns},get rows(){return e.props.rows},get height(){return e.props.height},get preview(){return e.props.preview},get object_fit(){return e.props.object_fit},get interactive(){return e.shared.interactive},get allow_preview(){return e.props.allow_preview},get show_share_button(){return t.get(s)},get show_download_button(){return t.get(c)},get fit_columns(){return e.props.fit_columns},get i18n(){return e.i18n},_fetch:(...r)=>e.shared.client.fetch(...r),get show_fullscreen_button(){return t.get(G)},get fullscreen(){return t.get(d)},get root(){return e.shared.root},get file_types(){return e.props.file_types},get max_file_size(){return e.shared.max_file_size},upload:(...r)=>e.shared.client.upload(...r),stream_handler:(...r)=>e.shared.client.stream(...r),get selected_index(){return e.props.selected_index},set selected_index(r){e.props.selected_index=r},get value(){return e.props.value},set value(r){e.props.value=r},$$events:{change:()=>e.dispatch("change"),clear:()=>e.dispatch("change"),select:r=>e.dispatch("select",r.detail),share:r=>e.dispatch("share",r.detail),error:r=>e.dispatch("error",r.detail),preview_open:()=>e.dispatch("preview_open"),preview_close:()=>e.dispatch("preview_close"),fullscreen:({detail:r})=>{t.set(d,r,!0)},delete:y,upload:async r=>{const B=Array.isArray(r.detail)?r.detail:[r.detail],h=await g(B);e.props.value=e.props.value?[...e.props.value,...h]:h,e.dispatch("upload",h),e.dispatch("change",e.props.value)}}})}};t.if($,i=>{e.shared.interactive&&t.get(w)?i(b):i(x,!1)})}t.append(o,p)},$$slots:{default:!0}})}t.pop()}export{_e as BaseExample,P as BaseGallery,he as default};
