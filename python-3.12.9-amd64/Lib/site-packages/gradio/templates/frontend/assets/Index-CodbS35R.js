import"./svelte/svelte_internal_flags_async.js";import*as e from"./svelte/svelte_internal_client.js";import{createEventDispatcher as He,beforeUpdate as Te,afterUpdate as ze,tick as C}from"./svelte/svelte_svelte.js";import"./svelte/svelte_internal_flags_legacy.js";import{e as Be,c as Se,g as Ee,h as Ce,I as Ie,S as qe,i as Fe,B as De}from"./IconButtonWrapper-BWheMLkN.js";import"./i18n-DMKL1Q3B.js";import{S as Pe}from"./StreamingBar-DrfQmzG9.js";import{G as Ye}from"./utils.svelte-Ceck75cM.js";import{default as xt}from"./Example-gF45j9DF.js";import"./MarkdownCode-U4KoZ7qK.js";import"./index-BXZmp9-u.js";import"./svelte/svelte_animate.js";import"./svelte/svelte_attachments.js";import"./svelte/svelte_easing.js";import"./svelte/svelte_internal_flags_tracing.js";import"./svelte/svelte_internal_server.js";import"./svelte/svelte_legacy.js";import"./svelte/svelte_motion.js";import"./svelte/svelte_reactivity.js";import"./svelte/svelte_reactivity_window.js";import"./svelte/svelte_server.js";import"./svelte/svelte_store.js";import"./svelte/svelte_transition.js";import"./svelte/svelte_events.js";import"./prism-python-iiDAHIFD.js";var Ge=e.from_html('<div class="validation-error svelte-1hguek3"> </div>'),Ke=e.from_html(" <!>",1),Le=e.from_html('<input data-testid="textbox" type="text"/>'),Me=e.from_html('<input data-testid="password" type="password" autocomplete=""/>'),Ue=e.from_html('<input data-testid="textbox" type="email" autocomplete="email"/>'),We=e.from_html('<textarea data-testid="textbox"></textarea>'),je=e.from_html("<button><!></button>"),Ae=e.from_html("<button><!></button>"),Je=e.from_html('<label><!> <!> <div class="input-container svelte-1hguek3"><!> <!> <!></div></label>');function Ne(Q,n){e.push(n,!1);let _=e.prop(n,"value",12,""),r=e.prop(n,"value_is_output",12,!1),d=e.prop(n,"lines",12,1),T=e.prop(n,"placeholder",12,""),Y=e.prop(n,"label",12),G=e.prop(n,"info",12,void 0),B=e.prop(n,"disabled",12,!1),x=e.prop(n,"show_label",12,!0),L=e.prop(n,"container",12,!0),z=e.prop(n,"max_lines",12,void 0),w=e.prop(n,"type",12,"text"),I=e.prop(n,"buttons",28,()=>[]),H=e.prop(n,"submit_btn",12,null),m=e.prop(n,"stop_btn",12,null),q=e.prop(n,"rtl",12,!1),g=e.prop(n,"autofocus",12,!1),F=e.prop(n,"text_align",12,void 0),M=e.prop(n,"autoscroll",12,!0),D=e.prop(n,"max_length",12,void 0),l=e.prop(n,"html_attributes",12,null),y=e.prop(n,"validation_error",12,void 0),p=e.mutable_source(),U=e.mutable_source(!1),R,V,$=0,W=!1,k=e.mutable_source();const ie=!H(),S=He();Te(()=>{!W&&e.get(p)&&e.get(p).offsetHeight+e.get(p).scrollTop>e.get(p).scrollHeight-100&&(V=!0)});const oe=()=>{V&&M()&&!W&&e.get(p).scrollTo(0,e.get(p).scrollHeight)};async function ue(){await C(),S("change",_())}ze(()=>{g()&&e.get(p).focus(),V&&M()&&oe(),r(!1)});async function _e(){"clipboard"in navigator&&(await navigator.clipboard.writeText(_()),S("copy",{value:_()}),ce())}function ce(){e.set(U,!0),R&&clearTimeout(R),R=setTimeout(()=>{e.set(U,!1)},1e3)}function j(t){const a=t.target,o=a.value,i=[a.selectionStart,a.selectionEnd];S("select",{value:o.substring(...i),index:i})}async function A(t){t.key==="Enter"&&t.shiftKey&&d()>1?(t.preventDefault(),await C(),S("submit")):t.key==="Enter"&&!t.shiftKey&&d()===1&&e.get(k)>=1&&(t.preventDefault(),await C(),S("submit")),await C(),S("input",_())}function de(t){const a=t.target,o=a.scrollTop;o<$&&(W=!0),$=o;const i=a.scrollHeight-a.clientHeight;o>=i&&(W=!1)}function pe(){S("stop")}function fe(){S("submit")}async function J(t){if(await C(),d()===e.get(k))return;const a=t.target,o=window.getComputedStyle(a),i=parseFloat(o.paddingTop),h=parseFloat(o.paddingBottom),v=parseFloat(o.lineHeight);let s=e.get(k)===void 0?!1:i+h+v*e.get(k),f=i+h+d()*v;a.style.height="1px";let b;s&&a.scrollHeight>s?b=s:a.scrollHeight<f?b=f:b=a.scrollHeight,a.style.height=`${b}px`,he(a)}function he(t){const a=t.scrollHeight,o=t.clientHeight,i=parseFloat(window.getComputedStyle(t).lineHeight);a>o+i?t.style.overflowY="scroll":t.style.overflowY="hidden"}function be(t,a){if(!(d()===e.get(k)||d()===1&&e.get(k)===1)&&(t.style.overflowY="scroll",t.addEventListener("input",J),!!a.trim()))return J({target:t}),{destroy:()=>t.removeEventListener("input",J)}}e.legacy_pre_effect(()=>(e.deep_read_state(z()),e.deep_read_state(w()),e.deep_read_state(d())),()=>{z()===void 0||z()===null?w()==="text"?e.set(k,Math.max(d(),20)):e.set(k,1):e.set(k,Math.max(z(),d()))}),e.legacy_pre_effect(()=>e.deep_read_state(_()),()=>{_()===null&&_("")}),e.legacy_pre_effect(()=>(e.deep_read_state(_()),e.deep_read_state(y()),e.get(p),e.deep_read_state(d()),e.get(k)),()=>{_(),y(),e.get(p)&&d()!==e.get(k)&&d()>1&&J({target:e.get(p)})}),e.legacy_pre_effect(()=>e.deep_read_state(_()),()=>{_(),ue()}),e.legacy_pre_effect_reset();var ge={get value(){return _()},set value(t){_(t),e.flush()},get value_is_output(){return r()},set value_is_output(t){r(t),e.flush()},get lines(){return d()},set lines(t){d(t),e.flush()},get placeholder(){return T()},set placeholder(t){T(t),e.flush()},get label(){return Y()},set label(t){Y(t),e.flush()},get info(){return G()},set info(t){G(t),e.flush()},get disabled(){return B()},set disabled(t){B(t),e.flush()},get show_label(){return x()},set show_label(t){x(t),e.flush()},get container(){return L()},set container(t){L(t),e.flush()},get max_lines(){return z()},set max_lines(t){z(t),e.flush()},get type(){return w()},set type(t){w(t),e.flush()},get buttons(){return I()},set buttons(t){I(t),e.flush()},get submit_btn(){return H()},set submit_btn(t){H(t),e.flush()},get stop_btn(){return m()},set stop_btn(t){m(t),e.flush()},get rtl(){return q()},set rtl(t){q(t),e.flush()},get autofocus(){return g()},set autofocus(t){g(t),e.flush()},get text_align(){return F()},set text_align(t){F(t),e.flush()},get autoscroll(){return M()},set autoscroll(t){M(t),e.flush()},get max_length(){return D()},set max_length(t){D(t),e.flush()},get html_attributes(){return l()},set html_attributes(t){l(t),e.flush()},get validation_error(){return y()},set validation_error(t){y(t),e.flush()}};e.init();var N=Je();let ee;var te=e.child(N);{var ve=t=>{Se(t,{children:(a,o)=>{{let i=e.derived_safe_equal(()=>e.get(U)?Ee:Ce),h=e.derived_safe_equal(()=>e.get(U)?"Copied":"Copy");Ie(a,{get Icon(){return e.get(i)},get label(){return e.get(h)},$$events:{click:_e}})}},$$slots:{default:!0}})};e.if(te,t=>{e.deep_read_state(x()),e.deep_read_state(I()),e.untrack(()=>x()&&I().includes("copy"))&&t(ve)})}var ae=e.sibling(te,2);{let t=e.derived_safe_equal(()=>y()?!0:x());Be(ae,{get show_label(){return e.get(t)},get info(){return G()},children:(a,o)=>{e.next();var i=Ke(),h=e.first_child(i),v=e.sibling(h);{var s=f=>{var b=Ge(),X=e.child(b,!0);e.reset(b),e.template_effect(()=>e.set_text(X,y())),e.append(f,b)};e.if(v,f=>{y()&&f(s)})}e.template_effect(()=>e.set_text(h,`${Y()??""} `)),e.append(a,i)},$$slots:{default:!0}})}var re=e.sibling(ae,2),le=e.child(re);{var me=t=>{var a=e.comment(),o=e.first_child(a);{var i=v=>{var s=Le();e.remove_input_defaults(s);let f;e.autofocus(s,g()),e.bind_this(s,b=>e.set(p,b),()=>e.get(p)),e.template_effect(()=>{f=e.set_class(s,1,"scroll-hide svelte-1hguek3",null,f,{"validation-error":y()}),e.set_attribute(s,"dir",q()?"rtl":"ltr"),e.set_attribute(s,"placeholder",T()),s.disabled=B(),e.set_attribute(s,"maxlength",D()),e.set_style(s,F()?"text-align: "+F():""),e.set_attribute(s,"autocapitalize",(e.deep_read_state(l()),e.untrack(()=>l()?.autocapitalize))),e.set_attribute(s,"autocorrect",(e.deep_read_state(l()),e.untrack(()=>l()?.autocorrect))),e.set_attribute(s,"spellcheck",(e.deep_read_state(l()),e.untrack(()=>l()?.spellcheck))),e.set_attribute(s,"autocomplete",(e.deep_read_state(l()),e.untrack(()=>l()?.autocomplete))),e.set_attribute(s,"tabindex",(e.deep_read_state(l()),e.untrack(()=>l()?.tabindex))),e.set_attribute(s,"enterkeyhint",(e.deep_read_state(l()),e.untrack(()=>l()?.enterkeyhint))),e.set_attribute(s,"lang",(e.deep_read_state(l()),e.untrack(()=>l()?.lang))),s.dir=s.dir}),e.bind_value(s,_),e.event("keypress",s,A),e.event("blur",s,function(b){e.bubble_event.call(this,n,b)}),e.event("select",s,j),e.event("focus",s,function(b){e.bubble_event.call(this,n,b)}),e.append(v,s)},h=v=>{var s=e.comment(),f=e.first_child(s);{var b=P=>{var u=Me();e.remove_input_defaults(u);let O;e.autofocus(u,g()),e.bind_this(u,E=>e.set(p,E),()=>e.get(p)),e.template_effect(()=>{O=e.set_class(u,1,"scroll-hide svelte-1hguek3",null,O,{"validation-error":y()}),e.set_attribute(u,"placeholder",T()),u.disabled=B(),e.set_attribute(u,"maxlength",D()),e.set_attribute(u,"autocapitalize",(e.deep_read_state(l()),e.untrack(()=>l()?.autocapitalize))),e.set_attribute(u,"autocorrect",(e.deep_read_state(l()),e.untrack(()=>l()?.autocorrect))),e.set_attribute(u,"spellcheck",(e.deep_read_state(l()),e.untrack(()=>l()?.spellcheck))),e.set_attribute(u,"tabindex",(e.deep_read_state(l()),e.untrack(()=>l()?.tabindex))),e.set_attribute(u,"enterkeyhint",(e.deep_read_state(l()),e.untrack(()=>l()?.enterkeyhint))),e.set_attribute(u,"lang",(e.deep_read_state(l()),e.untrack(()=>l()?.lang)))}),e.bind_value(u,_),e.event("keypress",u,A),e.event("blur",u,function(E){e.bubble_event.call(this,n,E)}),e.event("select",u,j),e.event("focus",u,function(E){e.bubble_event.call(this,n,E)}),e.append(P,u)},X=P=>{var u=e.comment(),O=e.first_child(u);{var E=Z=>{var c=Ue();e.remove_input_defaults(c);let ne;e.autofocus(c,g()),e.bind_this(c,K=>e.set(p,K),()=>e.get(p)),e.template_effect(()=>{ne=e.set_class(c,1,"scroll-hide svelte-1hguek3",null,ne,{"validation-error":y()}),e.set_attribute(c,"placeholder",T()),c.disabled=B(),e.set_attribute(c,"maxlength",D()),e.set_attribute(c,"autocapitalize",(e.deep_read_state(l()),e.untrack(()=>l()?.autocapitalize))),e.set_attribute(c,"autocorrect",(e.deep_read_state(l()),e.untrack(()=>l()?.autocorrect))),e.set_attribute(c,"spellcheck",(e.deep_read_state(l()),e.untrack(()=>l()?.spellcheck))),e.set_attribute(c,"tabindex",(e.deep_read_state(l()),e.untrack(()=>l()?.tabindex))),e.set_attribute(c,"enterkeyhint",(e.deep_read_state(l()),e.untrack(()=>l()?.enterkeyhint))),e.set_attribute(c,"lang",(e.deep_read_state(l()),e.untrack(()=>l()?.lang)))}),e.bind_value(c,_),e.event("keypress",c,A),e.event("blur",c,function(K){e.bubble_event.call(this,n,K)}),e.event("select",c,j),e.event("focus",c,function(K){e.bubble_event.call(this,n,K)}),e.append(Z,c)};e.if(O,Z=>{w()==="email"&&Z(E)},!0)}e.append(P,u)};e.if(f,P=>{w()==="password"?P(b):P(X,!1)},!0)}e.append(v,s)};e.if(o,v=>{w()==="text"?v(i):v(h,!1)})}e.append(t,a)},xe=t=>{var a=We();e.remove_textarea_child(a),e.autofocus(a,g());let o;e.action(a,(i,h)=>be?.(i,h),_),e.effect(()=>e.bind_value(a,_)),e.bind_this(a,i=>e.set(p,i),()=>e.get(p)),e.effect(()=>e.event("keypress",a,A)),e.effect(()=>e.event("blur",a,function(i){e.bubble_event.call(this,n,i)})),e.effect(()=>e.event("select",a,j)),e.effect(()=>e.event("focus",a,function(i){e.bubble_event.call(this,n,i)})),e.effect(()=>e.event("scroll",a,de)),e.template_effect(()=>{e.set_attribute(a,"dir",q()?"rtl":"ltr"),e.set_attribute(a,"placeholder",T()),e.set_attribute(a,"rows",d()),a.disabled=B(),e.set_attribute(a,"maxlength",D()),e.set_style(a,F()?"text-align: "+F():""),e.set_attribute(a,"autocapitalize",(e.deep_read_state(l()),e.untrack(()=>l()?.autocapitalize))),e.set_attribute(a,"autocorrect",(e.deep_read_state(l()),e.untrack(()=>l()?.autocorrect))),e.set_attribute(a,"spellcheck",(e.deep_read_state(l()),e.untrack(()=>l()?.spellcheck))),e.set_attribute(a,"autocomplete",(e.deep_read_state(l()),e.untrack(()=>l()?.autocomplete))),e.set_attribute(a,"tabindex",(e.deep_read_state(l()),e.untrack(()=>l()?.tabindex))),e.set_attribute(a,"enterkeyhint",(e.deep_read_state(l()),e.untrack(()=>l()?.enterkeyhint))),e.set_attribute(a,"lang",(e.deep_read_state(l()),e.untrack(()=>l()?.lang))),o=e.set_class(a,1,"svelte-1hguek3",null,o,{"no-label":!x()&&(H()||m()),"validation-error":y()}),a.dir=a.dir}),e.append(t,a)};e.if(le,t=>{d()===1&&e.get(k)===1?t(me):t(xe,!1)})}var se=e.sibling(le,2);{var ke=t=>{var a=je();let o;var i=e.child(a);{var h=s=>{qe(s)},v=s=>{var f=e.text();e.template_effect(()=>e.set_text(f,H())),e.append(s,f)};e.if(i,s=>{H()===!0?s(h):s(v,!1)})}e.reset(a),e.template_effect(()=>o=e.set_class(a,1,"submit-button svelte-1hguek3",null,o,{"padded-button":H()!==!0})),e.event("click",a,fe),e.append(t,a)};e.if(se,t=>{H()&&t(ke)})}var ye=e.sibling(se,2);{var we=t=>{var a=Ae();let o;var i=e.child(a);{var h=s=>{Fe(s,{fill:"none",stroke_width:2.5})},v=s=>{var f=e.text();e.template_effect(()=>e.set_text(f,m())),e.append(s,f)};e.if(i,s=>{m()===!0?s(h):s(v,!1)})}e.reset(a),e.template_effect(()=>o=e.set_class(a,1,"stop-button svelte-1hguek3",null,o,{"padded-button":m()!==!0})),e.event("click",a,pe),e.append(t,a)};e.if(ye,t=>{m()&&t(we)})}return e.reset(re),e.reset(N),e.template_effect(()=>ee=e.set_class(N,1,"svelte-1hguek3",null,ee,{container:L(),show_textbox_border:ie})),e.append(Q,N),e.pop(ge)}var Oe=e.from_html("<!> <!>",1);function gt(Q,n){e.push(n,!0);let _=e.rest_props(n,["$$slots","$$events","$$legacy"]);const r=new Ye(_);let d=e.derived(()=>r.shared.label||"Textbox");r.props.value=r.props.value??"";let T=e.state(e.proxy(r.props.value));async function Y(){e.get(T)!==r.props.value&&(e.set(T,r.props.value,!0),await C(),r.dispatch("change",e.snapshot(r.props.value)))}async function G(x){!r.shared||!r.props||(r.props.validation_error=null,r.props.value=x,await C(),r.dispatch("input"))}e.user_effect(()=>{Y()});function B(x){!r.shared||!r.props||(r.props.validation_error=null,r.props.value=x)}De(Q,{get visible(){return r.shared.visible},get elem_id(){return r.shared.elem_id},get elem_classes(){return r.shared.elem_classes},get scale(){return r.shared.scale},get min_width(){return r.shared.min_width},allow_overflow:!1,get padding(){return r.shared.container},children:(x,L)=>{var z=Oe(),w=e.first_child(z);{var I=m=>{Pe(m,e.spread_props({get autoscroll(){return r.shared.autoscroll},get i18n(){return r.i18n}},()=>r.shared.loading_status,{show_validation_error:!1,on_clear_status:()=>r.dispatch("clear_status",r.shared.loading_status)}))};e.if(w,m=>{r.shared.loading_status&&m(I)})}var H=e.sibling(w,2);{let m=e.derived(()=>r.shared?.loading_status?.validation_error||r.shared?.validation_error),q=e.derived(()=>!r.shared.interactive);Ne(H,{get value(){return r.props.value},get label(){return e.get(d)},get info(){return r.props.info},get show_label(){return r.shared.show_label},get lines(){return r.props.lines},get type(){return r.props.type},get rtl(){return r.props.rtl},get text_align(){return r.props.text_align},get max_lines(){return r.props.max_lines},get placeholder(){return r.props.placeholder},get submit_btn(){return r.props.submit_btn},get stop_btn(){return r.props.stop_btn},get buttons(){return r.props.buttons},get autofocus(){return r.props.autofocus},get container(){return r.shared.container},get autoscroll(){return r.shared.autoscroll},get max_length(){return r.props.max_length},get html_attributes(){return r.props.html_attributes},get validation_error(){return e.get(m)},get disabled(){return e.get(q)},$$events:{change:g=>B(g.detail),input:g=>G(g.detail),submit:()=>{r.shared.validation_error=null,r.dispatch("submit")},blur:()=>r.dispatch("blur"),select:g=>r.dispatch("select",g.detail),focus:()=>r.dispatch("focus"),stop:()=>r.dispatch("stop"),copy:g=>r.dispatch("copy",g.detail)}})}e.append(x,z)},$$slots:{default:!0}}),e.pop()}export{xt as BaseExample,Ne as BaseTextbox,gt as default};
